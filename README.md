# BestCar Project

Проект **BestCar** — это веб-приложение, построенное на Django, которое управляет данными о автомобилях. В проекте используются технологии для асинхронной обработки задач, полнотекстового поиска и работы с базой данных. В основе проекта лежат следующие технологии:

- **Django** — основной фреймворк для разработки веб-приложений.
- **Celery** — асинхронная очередь задач для обработки фона.
- **Redis** — используется как брокер для Celery.
- **PostgreSQL** — реляционная база данных для хранения данных.
- **Elasticsearch** — для полнотекстового поиска.
- **AMQP** — для обмена сообщениями.

## Стек технологий

- **Django 5.0.7**
- **Celery 5.4.0**
- **Redis 5.0.8**
- **PostgreSQL 16**
- **Elasticsearch 8.7.0**
- **Docker** — для контейнеризации

## Требования

Перед тем как запустить проект, убедитесь, что у вас установлены следующие компоненты:

- **Docker** и **Docker Compose**: для работы с контейнерами.
- **Python 3.9+**: для разработки и использования виртуальных окружений.
- **PostgreSQL** и **Redis**: в Docker контейнерах.
- **Elasticsearch**: для полнотекстового поиска.

- ## Настройка и запуск проекта

### 1. Установите Docker и Docker Compose

Убедитесь, что у вас установлены Docker и Docker Compose. Вы можете скачать и установить их с [официального сайта Docker](https://www.docker.com/get-started).

### 2. Настройка переменных окружения

Создайте файл `.env` в корневой директории проекта и укажите свои значения для следующих переменных:

```env
# Настройки базы данных PostgreSQL
DB_NAME=sitecars
DB_USER=postgres
DB_PASSWORD=123
DB_HOST=db
DB_PORT=5432

# Настройки Redis
REDIS_HOST=redis
REDIS_PORT=6379

# Настройки Elasticsearch
ELASTICSEARCH_HOST=elasticsearch
ELASTICSEARCH_PORT=9200

# Настройки Celery
CELERY_BROKER_URL=redis://redis:6379/0

### 3. Сборка и запуск контейнеров

Для сборки и запуска проекта с использованием Docker Compose выполните следующие шаги:

1. В корневой директории проекта выполните команду для сборки контейнеров:

    ```bash
    docker-compose build
    ```

2. Запустите проект:

    ```bash
    docker-compose up
    ```

   Это запустит все необходимые сервисы: Django (Web), PostgreSQL (DB), Elasticsearch, Redis, а также сервисы Celery (Worker и Beat).

3. Откройте браузер и перейдите по адресу [http://localhost:8000](http://localhost:8000), чтобы увидеть приложение.

### 4. Миграции базы данных

После запуска контейнеров, выполните миграции базы данных:

```bash
docker-compose exec web python manage.py migrate

### 5. Запуск Celery Worker и Beat

Celery используется для обработки фоновых задач. Запустите Celery Worker и Beat с помощью следующих команд:

- Для запуска **Celery Worker**:

    ```bash
    docker-compose exec celery bash
    celery -A bestcar worker --loglevel=info
    ```

- Для запуска **Celery Beat** (для периодических задач):

    ```bash
    docker-compose exec celerybeat bash
    celery -A bestcar beat --loglevel=info
    ```

### 6. Проверка состояния сервисов

Чтобы убедиться, что все сервисы работают правильно, можно использовать команду:

```bash
docker-compose ps

## Использование

Ваш проект будет доступен по адресу [http://localhost:8000](http://localhost:8000).

С помощью Celery вы можете выполнять задачи в фоновом режиме. Чтобы проверить работу Celery, создайте задачу и запустите её. В логах контейнера Celery можно увидеть результаты выполнения задач.

## Примечания

- Все сервисы запускаются в контейнерах Docker, что упрощает настройку и развертывание проекта.
- Для взаимодействия с проектом необходимо, чтобы все сервисы были запущены и доступны.
- База данных PostgreSQL настроена с использованием переменных из `.env`.
